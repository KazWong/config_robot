<launch>
  <arg name="ns" default=""/>
  <arg name="sim" default="false"/>
  <arg name="joint_pub" default="false"/>
  <arg name="shift_x" default="0.0"/>
  <arg name="shift_y" default="0.0"/>
  <arg name="shift_z" default="0.0"/>

  <!-- Parsing xacro and setting robot_description parameter -->
  <param name="robot_description" 
         command="$(find xacro)/xacro --inorder '$(find launcher)/urdf/agv_omni.urdf.xacro'" />
         
  <rosparam file="$(find launcher)/urdf/controller/joint.yaml" command="load" />

  <!-- Starting robot state publish which will publish tf -->
  <node name="robot_state_publisher" pkg="robot_state_publisher" type="state_publisher">
    <param if="$(arg sim)" name="publish_frequency" type="double" value="50.0" />
    <param name="tf_prefix" type="string" value="$(arg ns)" />
    <param name="use_tf_static" type="bool" value="true" />
    <param name="ignore_timestamp" type="bool" value="true" />
  </node>
  
  <!-- Setting gui parameter to true for display joint slider -->
  <node if="$(arg joint_pub)" name="joint_state_publisher" pkg="joint_state_publisher"
        type="joint_state_publisher">
    <param name="use_gui" value="true" />
  </node>

  <!-- <node name="joint_state_controller_spawner" pkg="controller_manager" type="controller_manager" args="spawn joint_state_controller" /> -->
  
  <node if="$(arg sim)" name="urdf_spawner" pkg="gazebo_ros" type="spawn_model" respawn="false"
        output="screen" args="-urdf -model agv -param robot_description 
        -x $(arg shift_x) -y $(arg shift_y) -z $(arg shift_z) "/> 
</launch>
